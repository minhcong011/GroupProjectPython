{% extends "admin/base_site.html" %}
{% load i18n admin_urls static %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block extrahead %}
{{ block.super }}
<style>
    .backup-file-info {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 5px;
        padding: 15px;
        margin: 10px 0;
    }
    .backup-file-name {
        font-weight: bold;
        color: #2c5aa0;
    }
    .backup-file-details {
        font-size: 0.9em;
        color: #666;
        margin-top: 5px;
    }
    .warning-box {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 5px;
        padding: 15px;
        margin: 20px 0;
        color: #856404;
    }
</style>
{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'custom_admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'custom_admin:dashboard' %}">Dashboard</a>
&rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<div class="content">
    <h1>{{ title }}</h1>
    
    <div class="warning-box">
        <strong>‚ö†Ô∏è C·∫¢NH B√ÅO:</strong> Thao t√°c n√†y s·∫Ω x√≥a to√†n b·ªô d·ªØ li·ªáu hi·ªán t·∫°i v√† thay th·∫ø b·∫±ng d·ªØ li·ªáu t·ª´ file backup!
        <br>H√£y ƒë·∫£m b·∫£o b·∫°n ƒë√£ t·∫°o backup hi·ªán t·∫°i tr∆∞·ªõc khi th·ª±c hi·ªán.
    </div>
    
    <div class="module">
        <h2>Ch·ªçn file backup ƒë·ªÉ ph·ª•c h·ªìi</h2>
        
        {% if backup_files %}
        <form method="post">
            {% csrf_token %}
            
            {% for file in backup_files %}
            <div class="backup-file-info">
                <label>
                    <input type="radio" name="backup_file" value="{{ file.path }}" required>
                    <span class="backup-file-name">{{ file.name }}</span>
                </label>
                <div class="backup-file-details">
                    üìÖ Ng√†y t·∫°o: {{ file.modified|date:"d/m/Y H:i:s" }} | 
                    üì¶ K√≠ch th∆∞·ªõc: {{ file.size|filesizeformat }}
                </div>
            </div>
            {% endfor %}
            
            <div class="submit-row">
                <input type="submit" value="üîÑ Ph·ª•c h·ªìi Database" class="default" 
                       onclick="return confirm('C·∫¢NH B√ÅO: Thao t√°c n√†y s·∫Ω x√≥a to√†n b·ªô d·ªØ li·ªáu hi·ªán t·∫°i!\n\nB·∫°n c√≥ ch·∫Øc mu·ªën ti·∫øp t·ª•c ph·ª•c h·ªìi t·ª´ file backup ƒë√£ ch·ªçn?');">
                <a href="{% url 'custom_admin:dashboard' %}" class="button cancel-link">‚ùå H·ªßy</a>
            </div>
        </form>
        {% else %}
        <p>‚ùå Kh√¥ng t√¨m th·∫•y file backup n√†o trong th∆∞ m·ª•c <code>backups/</code></p>
        <p>üí° H√£y t·∫°o backup tr∆∞·ªõc b·∫±ng c√°ch s·ª≠ d·ª•ng ch·ª©c nƒÉng <a href="{% url 'custom_admin:backup_database' %}">Sao l∆∞u Database</a>.</p>
        <a href="{% url 'custom_admin:dashboard' %}" class="button">üè† Quay l·∫°i Dashboard</a>
        {% endif %}
    </div>
</div>
{% endblock %}
